import 'package:flutter_test/flutter_test.dart';
import 'package:helloWorldFlutter/src/json_parsing.dart';

void main() {
  test('Parses json array', () {
    const jsonString = "[24869014,24866896,24869219,24869727,24865762,24868415,24865502,24868248,24869750,24866190,24866706,24867853,24866937,24865755,24865731,24869046,24865875,24857096,24856880,24866377,24866730,24865450,24861623,24869226,24848443,24864838,24864789,24865860,24863246,24865713,24864754,24864279,24867444,24867212,24860688,24849452,24862507,24860690,24868420,24861923,24863384,24862159,24855750,24867241,24869077,24854207,24858750,24846905,24858172,24856470,24863020,24867732,24857527,24862547,24863629,24859285,24855353,24867410,24836520,24861136,24857356,24852963,24860615,24857679,24866898,24850298,24846241,24833683,24853503,24858766,24856072,24866927,24863898,24858446,24856767,24846887,24858363,24855569,24863996,24862187,24867201,24863941,24865267,24853116,24863935,24851365,24861395,24849498,24860018,24851222,24862343,24856502,24864760,24857708,24862360,24846987,24856541,24852341,24863352,24860991,24860043,24866878,24856607,24868146,24837640,24853787,24846099,24837898,24856568,24858456,24857224,24859787,24846026,24855342,24850395,24857834,24857049,24863506,24867243,24859673,24854201,24866580,24855183,24855495,24843643,24847350,24868076,24856467,24852372,24865281,24865190,24856235,24860409,24851861,24860394,24855837,24852362,24845339,24842325,24836090,24868012,24861350,24850583,24848391,24842856,24836558,24838816,24834965,24851205,24829565,24860430,24835436,24835811,24859348,24842270,24848249,24845332,24849348,24836167,24863305,24849216,24827162,24842894,24839848,24846828,24848618,24835336,24867295,24844252,24844529,24862619,24861645,24845878,24834435,24857488,24856867,24848588,24829635,24857713,24835539,24836064,24854462,24835357,24852333,24839113,24849878,24841998,24862676,24846132,24840464,24862743,24836434,24849485,24840355,24836422,24864424,24842306,24864233,24848355,24834636,24851543,24834714,24846335,24835185,24856462,24846331,24861431,24836833,24835294,24865707,24833218,24852385,24850102,24846411,24865433,24834767,24846300,24846626,24865951,24839887,24863769,24851455,24834596,24861870,24845264,24837331,24836519,24836676,24835766,24861592,24852401,24864231,24866374,24830089,24857396,24857646,24867974,24854108,24865769,24859948,24848511,24834117,24842786,24861518,24840972,24864207,24856897,24849481,24842857,24858279,24859314,24837309,24845031,24859199,24848984,24860240,24839309,24836979,24851945,24844353,24855582,24846067,24834275,24837458,24826951,24834981,24835219,24864812,24840119,24858524,24833723,24850244,24845300,24840013,24834552,24848188,24848782,24857286,24846210,24865195,24851340,24861415,24831852,24842218,24836499,24847500,24842877,24857437,24863670,24836469,24835068,24860509,24832055,24828509,24854357,24834716,24867126,24836252,24860374,24834667,24826873,24852379,24856142,24847251,24853679,24849006,24862593,24843744,24862408,24831268,24843278,24839140,24863863,24855453,24830133,24863794,24836206,24844475,24839744,24835237,24863087,24864227,24859918,24827509,24834336,24836402,24859994,24848809,24846296,24853971,24844426,24835990,24865138,24849791,24836058,24831462,24834226,24837200,24833801,24860416,24828800,24834299,24833601,24863684,24827295,24854999,24850476,24842648,24847310,24843037,24863532,24837031,24838106,24826854,24863356,24838958,24834896,24848921,24859395,24857045,24864769,24852619,24863154,24849040,24827360,24848318,24838088,24834534,24866439,24843664,24831637,24829473,24851295,24847703,24858485,24831162,24854297,24850587,24866425,24859391,24861861,24859763,24830431,24861558,24831641,24837433,24861405,24844666,24857268,24863716,24827622,24851107,24848878,24829768,24860981,24831809,24834729,24863426,24841870,24863369,24852913,24855337,24858033,24857941,24836643,24830927,24842298,24860577,24831699,24863003,24855789,24862974,24854222,24839405,24828731,24832404,24829158,24839532,24846559,24836241,24838257,24830588,24851141,24855879,24836344,24854169,24855388,24837686,24838914,24833579,24841247,24861262,24853940,24850776,24845908,24828584,24857199,24853613,24848681,24841420,24861173,24829947,24840063,24848526,24851273,24848421,24842093,24852544,24848062,24864808,24852050,24838483,24847561,24862825,24828588,24847417,24834158,24840437,24856748,24829184,24856755,24827814,24856448,24854420,24837248,24831838,24865421,24850917,24858567,24855151,24842444,24829382,24842412,24854014,24858191,24841747,24835438,24827011,24840592,24853534,24834020,24827766,24851489,24840241,24830960,24827220,24857477,24845064,24854236,24862785,24844315,24857097,24837659,24833394,24837900,24853914,24843815,24856751,24849496,24856666]";

    expect(parseArray(jsonString).first,  24869014);
  });

  test('Parses json item', () {
    const jsonString = """{"by":"known","descendants":81,"id":24869014,"kids":[24869627,24869463,24870004,24869726,24869765,24869341,24869704,24869808,24869807,24869913,24869383,24869783,24869402,24869584,24869464],"score":110,"time":1603458174,"title":"Satya Nadella turned Microsoft around","type":"story","url":"https://www.economist.com/briefing/2020/10/22/how-satya-nadella-turned-microsoft-around"}""";
    final article = parseArticle(jsonString);

    expect(article.by,  "known");
  });
}
